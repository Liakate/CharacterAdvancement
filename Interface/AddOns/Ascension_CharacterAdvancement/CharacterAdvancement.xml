<!--
GUIDE: What is this file?
Purpose: Layout (visual structure) for the Character Advancement window.

How to read this file (no programming experience needed):
- This XML describes the *layout* of the UI: frames, buttons, text, and how they are arranged.
- The *behavior* (what happens when you click or when the game updates) is in the linked.lua files.
- Indentation shows what is inside what (children inside parents).
-->

<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/
https://raw.githubusercontent.com/Ascension-Addons/UI.xsd/main/UI.xsd">
    <!--
     NOTE:
    - This line loads the Lua file 'CharacterAdvancement.lua' which contains the behavior (what happens on clicks/events).
    -->
    <Script file="CharacterAdvancement.lua"/>

    <Frame name="CharacterAdvancement" parent="Collections" hidden="true" inherits="RaisedPortraitFrameTemplate">
        <Size x="1165" y="758"/>

        <Anchors>
            <Anchor point="BOTTOM" y="8"/>
        </Anchors>
        
        <Frames>
            <!--
             NOTE:
            - This creates a UI 'Frame' element named '$parentInputBlocker'.
            - It inherits from 'InputBlockTemplate' (a built-in template that provides default look/behavior).
            - 'parentKey' is a nickname used by Lua to find this child easily (example: self.InputBlocker).
            - Starts hidden until Lua shows it.
            -->
            <Frame name="$parentInputBlocker" parentKey="InputBlocker" inherits="InputBlockTemplate" hidden="true">
                <Anchors>
                    <Anchor point="TOPLEFT" x="2" y="-24"/>
                    <Anchor point="BOTTOMRIGHT" x="-2" y="2"/>
                </Anchors>
            </Frame>
            <Button name="$parentPetTalents" parentKey="PetTalents" inherits="BorderIconTemplate">
                <Size x="38" y="38"/>
                <Layers>
                    <Layer level="BACKGROUND">
                        <!--
                         NOTE:
                        - This creates a UI 'Texture' element named '$parentGlow'.
                        - 'parentKey' is a nickname used by Lua to find this child easily (example: self.Glow).
                        - Starts hidden until Lua shows it.
                        -->
                        <Texture name="$parentGlow" parentKey="Glow" hidden="true" alphaMode="ADD">
                            <Size x="100" y="100"/>
                            <Anchors>
                                <Anchor point="CENTER"/>
                            </Anchors>
                            
                            <Animations>
                                <AnimationGroup parentKey="Animation" looping="REPEAT">
                                    <Rotation duration="60" degrees="360"/>
                                </AnimationGroup>
                            </Animations>
                        </Texture>
                    </Layer>
                </Layers>
                
                <Frames>
                    <!--
                     NOTE:
                    - This creates a UI 'Frame' element named '$parentUnspentPoints'.
                    - It inherits from 'CATalentCountTemplate' (a built-in template that provides default look/behavior).
                    - 'parentKey' is a nickname used by Lua to find this child easily (example: self.UnspentPoints).
                    -->
                    <Frame name="$parentUnspentPoints" parentKey="UnspentPoints" inherits="CATalentCountTemplate">
                        <Anchors>
                            <Anchor point="CENTER" relativePoint="TOP" y="2"/>
                        </Anchors>
                    </Frame>
                </Frames>

                <HitRectInsets left="-12" right="-12" top="-12" bottom="-12"/>

                <Scripts>
                    <!--  NOTE: The code inside <OnLoad> is Lua that runs for this UI callback. -->
                    <OnLoad>
                        MixinAndLoadScripts(self, "BorderIconTemplateMixin")
                        self:SetRounded(true)
                        self:SetBorderSize(44, 48)
                        self:SetBorderOffset(0, -3)
                        self:SetBorderAtlas("GarrMission_PortraitRing")
                        self:SetIcon("Interface\\Icons\\Ability_Hunter_BeastCall")
                        self.Glow:SetAtlas("services-ring-large-glowspin", Const.TextureKit.IgnoreAtlasSize)
                    </OnLoad>
                    <!--  NOTE: The code inside <OnClick> is Lua that runs for this UI callback. -->
                    <OnClick>
                        ToggleTalentFrame()
                        CharacterAdvancementCloseButton:Click()
                    </OnClick>
                </Scripts>

                <ButtonText name="$parentText" parentKey="Text" text="TALENT_SPEC_PET_PRIMARY" inherits="GameFontNormalOutlineSmall">
                    <Anchors>
                        <Anchor point="TOP" relativePoint="BOTTOM" y="-2"/>
                    </Anchors>
                </ButtonText>

                <PushedTextOffset x="0" y="0"/>
            </Button>
            <!--
             NOTE:
            - This creates a UI 'Frame' element named '$parentNavigation'.
            - 'parentKey' is a nickname used by Lua to find this child easily (example: self.Navigation).
            -->
            <Frame name="$parentNavigation" parentKey="Navigation">
                <Size x="1056" y="102"/>
                <Anchors>
                    <Anchor point="TOPLEFT" x="2" y="-24"/>
                    <Anchor point="TOPRIGHT" x="-2" y="-24"/>
                </Anchors>
                
                <Frames>
                    <Button name="$parentDraftButton" parentKey="DraftButton" inherits="DraftModeMicroButtonTemplate">
                        <Anchors>
                            <Anchor point="TOPRIGHT" x="-20" y="-20"/>
                        </Anchors>

                        <Scripts>
                            <!--  NOTE: The code inside <OnLoad> is Lua that runs for this UI callback. -->
                            <OnLoad>
                                self:GetNormalTexture():SetPortraitTexture("Interface\\Icons\\inv_misc_dmc_destructiondeck")
                                self.tooltipTitle = TOGGLE_DRAFT_CARDS
                                self.tooltipText = TOGGLE_DRAFT_CARDS_TOOLTIP
                            </OnLoad>
                        </Scripts>
                    </Button>
                </Frames>
            </Frame>

            <!--
             NOTE:
            - This creates a UI 'Frame' element named '$parentNavigation2'.
            - 'parentKey' is a nickname used by Lua to find this child easily (example: self.Navigation2).
            -->
            <Frame name="$parentNavigation2" parentKey="Navigation2">
                <Anchors>
                    <Anchor point="TOPLEFT" x="4" y="-68"/>
                    <Anchor point="BOTTOMRIGHT" relativeTo="$parent" relativePoint="BOTTOMLEFT" x="128" y="6"/>
                </Anchors>

                <Frames>
                    <Button name="$parentCurrency" parentKey="Currency" inherits="CACurrencyBorderButtonTemplate">
                        <Anchors>
                            <Anchor point="BOTTOM" x="0" y="16"/>
                        </Anchors>
                    </Button>

                    <!--
                     NOTE:
                    - This creates a UI 'Button' element named '$parentCurrency2'.
                    - It inherits from 'CACurrencyBorderButtonTemplate' (a built-in template that provides default look/behavior).
                    - 'parentKey' is a nickname used by Lua to find this child easily (example: self.Currency2).
                    -->
                    <Button name="$parentCurrency2" parentKey="Currency2" inherits="CACurrencyBorderButtonTemplate">
                        <Anchors>
                            <Anchor point="BOTTOMRIGHT" relativeTo="$parentCurrency" x="12" y="-8"/>
                        </Anchors>
                    </Button>

                    <Frame name="$parentNineSlice" parentKey="NineSlice" inherits="NineSlicePanelTemplate2">
                        <Anchors>
                            <Anchor point="TOPLEFT" y="10"/>
                            <Anchor point="BOTTOMRIGHT" x="-2"/>
                        </Anchors>

                        <Attributes>
                            <Attribute name="layoutType" value="InsetFrameTemplate"/>
                        </Attributes>

                        <Layers>
                            <Layer level="OVERLAY">
                                <!--
                                 NOTE:
                                - This creates a UI 'Texture' element named '$parentCornerR'.
                                - 'parentKey' is a nickname used by Lua to find this child easily (example: self.CornerR).
                                -->
                                <Texture name="$parentCornerR" parentKey="CornerR">
                                    <Size x="42" y="42"/>
                                    <Anchors>
                                        <Anchor point="BOTTOMRIGHT" x="2" y="-2"/>
                                    </Anchors>
                                </Texture>

                                <Texture name="$parentCornerL" parentKey="CornerL">
                                    <Size x="42" y="42"/>
                                    <Anchors>
                                        <Anchor point="BOTTOMLEFT" x="-2" y="-2"/>
                                    </Anchors>
                                </Texture>
                            </Layer>
                        </Layers>
                    </Frame>
                </Frames>

                <Layers>
                    <Layer level="BACKGROUND">
                        <!--
                         NOTE:
                        - This creates a UI 'Texture' element named '$parentBackground'.
                        -->
                        <Texture name="$parentBackground" file="Interface\FrameGeneral\UI-Background-Marble" vertTile="true" horizTile="true">
                            <Anchors>
                                <Anchor point="TOPLEFT" x="2" y="8"/>
                                <Anchor point="BOTTOMRIGHT" x="-2" y="2"/>
                            </Anchors>
                        </Texture>
                    </Layer>

                    <Layer level="BORDER">
                        <Texture name="$parentCrystals" parentKey="Crystals">
                            <Size x="129.6" y="76.545"/>
                            <Anchors>
                                <Anchor point="BOTTOM" x="10" y="-10"/>
                            </Anchors>
                        </Texture>

                    </Layer>
                </Layers>

                <Scripts>
                    <!--  NOTE: The code inside <OnLoad> is Lua that runs for this UI callback. -->
                    <OnLoad>
                        self.Currency2.item = ItemData.ABILITY_ESSENCE
                        self.Currency2:SetFrameLevel(self.Currency:GetFrameLevel()+1)
                        self.Currency2:SetScale(0.5)
                        self.Crystals:SetAtlas("ca-navigation-illustration-gems-blue", Const.TextureKit.IgnoreAtlasSize)
                        self.NineSlice.CornerR:SetAtlas("ca-navigation-corner-ring-r", Const.TextureKit.IgnoreAtlasSize)
                        self.NineSlice.CornerL:SetAtlas("ca-navigation-corner-ring", Const.TextureKit.IgnoreAtlasSize)
                    </OnLoad>
                </Scripts>
            </Frame>

            <!--
             NOTE:
            - This creates a UI 'ScrollFrame' element named '$parentContent'.
            - It inherits from 'UIPanelScrollFrameTemplate' (a built-in template that provides default look/behavior).
            - 'parentKey' is a nickname used by Lua to find this child easily (example: self.Content).
            -->
            <ScrollFrame name="$parentContent" parentKey="Content" inherits="UIPanelScrollFrameTemplate">
                <Size x="802" y="536"/>
                <Anchors>
                    <Anchor point="TOPLEFT" relativeTo="$parentNavigation2" relativePoint="TOPRIGHT" x="0" y="0"/>
                </Anchors>

                <Frames>
                    <Frame name="$parentHeaderSpells" parentKey="HeaderSpells">
                        <Size x="433" y="120"/>
                        <Anchors>
                            <Anchor Point="TOPLEFT"/>
                        </Anchors>
                        <Layers>
                            <Layer level="OVERLAY">                                
                                <!--
                                 NOTE:
                                - This creates a UI 'FontString' element named '$parentTotal'.
                                - It inherits from 'GameFontHighlightMedium' (a built-in template that provides default look/behavior).
                                - 'parentKey' is a nickname used by Lua to find this child easily (example: self.Total).
                                -->
                                <FontString inherits="GameFontHighlightMedium" name="$parentTotal" parentKey="Total">
                                    <Anchors>
                                        <Anchor Point="TOP" y="-10"/>
                                    </Anchors>
                                </FontString>

                                <FontString name="$parentSubText" parentKey="SubText" text="CHOOSE_A_PRIMARY_STAT" inherits="GameFontNormal">
                                    <Anchors>
                                        <Anchor point="TOP" y="-36"/>
                                    </Anchors>
                                </FontString>
                            </Layer>
                            <Layer level="ARTWORK">
                                <!--
                                 NOTE:
                                - This creates a UI 'Texture' element named '$parentTotalShadow'.
                                - 'parentKey' is a nickname used by Lua to find this child easily (example: self.TotalShadow).
                                -->
                                <Texture name="$parentTotalShadow" parentKey="TotalShadow" alpha="0.5">
                                    <Size x="350" y="64"/>
                                    <Anchors>
                                        <Anchor point="TOP" y="0"/>
                                    </Anchors>
                                </Texture>
                            </Layer>
                        </Layers>
                        <Frames>
                            <Button name="$parentAbilityEssence" parentKey="AbilityEssence" inherits="BorderIconTemplate">
                                <Size x="18" y="18"/>
                                <Anchors>
                                    <Anchor point="RIGHT" relativeTo="$parentTotal" relativePoint="LEFT" x="-6" y="0"/>
                                </Anchors>

                                <Scripts>
                                    <!--  NOTE: The code inside <OnEnter> is Lua that runs for this UI callback. -->
                                    <OnEnter>
                                        GameTooltip:SetOwner(self, "ANCHOR_RIGHT")
                                        GameTooltip:SetHyperlink("item:"..ItemData.ABILITY_ESSENCE)
                                        GameTooltip:Show()
                                    </OnEnter>
                                    <OnLeave>
                                        GameTooltip:Hide()
                                    </OnLeave>
                                    <!--  NOTE: The code inside <OnLoad> is Lua that runs for this UI callback. -->
                                    <OnLoad>
                                        MixinAndLoadScripts(self, "BorderIconTemplateMixin")
                                        self:SetRounded(true)
                                        self:SetIcon("Interface\\Icons\\inv_custom_abilityessence")
                                        self:SetBorderAtlas("pta-icon-border")
                                        self:SetBorderSize(34, 34)
                                        self.IconBorder:SetDesaturated(true)
                                        self:SetBorderOffset(0, -2)
                                    </OnLoad>
                                </Scripts>
                            </Button>
                        </Frames>
                    </Frame>

                    <!--
                     NOTE:
                    - This creates a UI 'Frame' element named '$parentHeaderTalents'.
                    - 'parentKey' is a nickname used by Lua to find this child easily (example: self.HeaderTalents).
                    -->
                    <Frame name="$parentHeaderTalents" parentKey="HeaderTalents">
                        <Size x="369" y="120"/>
                        <Anchors>
                            <Anchor Point="TOPRIGHT"/>
                        </Anchors>
                        <Layers>
                            <Layer level="OVERLAY">
                                <FontString inherits="GameFontHighlightMedium" name="$parentTotal" parentKey="Total">
                                    <Anchors>
                                        <Anchor point="TOP" y="-10"/>
                                    </Anchors>
                                </FontString>

                                <!--
                                 NOTE:
                                - This creates a UI 'FontString' element named '$parentSubText'.
                                - It inherits from 'GameFontNormal' (a built-in template that provides default look/behavior).
                                - 'parentKey' is a nickname used by Lua to find this child easily (example: self.SubText).
                                -->
                                <FontString name="$parentSubText" parentKey="SubText" text="CHOOSE_A_PRIMARY_STAT" inherits="GameFontNormal">
                                    <Anchors>
                                        <Anchor point="TOP" y="-36"/>
                                    </Anchors>
                                </FontString>
                            </Layer>
                            <Layer level="ARTWORK">
                                <Texture name="$parentTotalShadow" parentKey="TotalShadow" alpha="0.5">
                                    <Size x="350" y="64"/>
                                    <Anchors>
                                        <Anchor point="TOP" y="0"/>
                                    </Anchors>
                                </Texture>
                            </Layer>
                        </Layers>
                        <Frames>
                            <!--
                             NOTE:
                            - This creates a UI 'Button' element named '$parentTalentEssence'.
                            - It inherits from 'BorderIconTemplate' (a built-in template that provides default look/behavior).
                            - 'parentKey' is a nickname used by Lua to find this child easily (example: self.TalentEssence).
                            -->
                            <Button name="$parentTalentEssence" parentKey="TalentEssence" inherits="BorderIconTemplate">
                                <Size x="18" y="18"/>
                                <Anchors>
                                    <Anchor point="RIGHT" relativeTo="$parentTotal" relativePoint="LEFT" x="-6" y="0"/>
                                </Anchors>

                                <Scripts>
                                    <!--  NOTE: The code inside <OnEnter> is Lua that runs for this UI callback. -->
                                    <OnEnter>
                                        GameTooltip:SetOwner(self, "ANCHOR_RIGHT")
                                        GameTooltip:SetHyperlink("item:"..ItemData.TALENT_ESSENCE)
                                        GameTooltip:Show()
                                    </OnEnter>
                                    <OnLeave>
                                        GameTooltip:Hide()
                                    </OnLeave>
                                    <!--  NOTE: The code inside <OnLoad> is Lua that runs for this UI callback. -->
                                    <OnLoad>
                                        MixinAndLoadScripts(self, "BorderIconTemplateMixin")
                                        self:SetRounded(true)
                                        self:SetIcon("Interface\\Icons\\inv_custom_Talentessence")
                                        self:SetBorderAtlas("pta-icon-border")
                                        self:SetBorderSize(34, 34)
                                        self.IconBorder:SetDesaturated(true)
                                        self:SetBorderOffset(0, -2)
                                    </OnLoad>
                                </Scripts>
                            </Button>
                        </Frames>
                    </Frame>

                    <!--
                     NOTE:
                    - This creates a UI 'Button' element named '$parentWCRapidRollButton'.
                    - It inherits from 'StandardButtonTemplate' (a built-in template that provides default look/behavior).
                    - 'parentKey' is a nickname used by Lua to find this child easily (example: self.WCRapidRollButton).
                    - Starts hidden until Lua shows it.
                    -->
                    <Button name="$parentWCRapidRollButton" parentKey="WCRapidRollButton" motionScriptsWhileDisabled="true" text="CA_RAPID_ROLLING" inherits="StandardButtonTemplate" hidden="true">
                        <Size x="128" y="22"/>

                        <Anchors>
                            <Anchor point="TOPRIGHT" relativePoint="BOTTOMRIGHT" x="18" y="0"/>
                        </Anchors>

                        <Scripts>
                            <!--  NOTE: The code inside <OnLoad> is Lua that runs for this UI callback. -->
                            <OnLoad>
                                self.tooltipTitle = CA_RAPID_ROLLING
                                self.tooltipText = CA_RAPID_ROLLING_TEXT
                            </OnLoad>
                            <OnEnter>
                                GameTooltip_GenericTooltip(self, "ANCHOR_TOP")
                                if self.tooltipExtra then
                                    GameTooltip:AddLine(self.tooltipExtra, RED_FONT_COLOR.r, RED_FONT_COLOR.g, RED_FONT_COLOR.b, true)
                                    GameTooltip:Show()
                                end
                            </OnEnter>
                            <!--  NOTE: The code inside <OnLeave> is Lua that runs for this UI callback. -->
                            <OnLeave function="GameTooltip_Hide"/>
                            <OnClick>
                                WildCardRapidRollingFrame:SetShown(not WildCardRapidRollingFrame:IsShown())
                            </OnClick>
                        </Scripts>

                        <ButtonText inherits="GameFontHighlight" setAllPoints="true"/>
                    </Button>

                    <Frame name="$parentFooter" parentKey="Footer">
                        <Size x="808" y="22"/>
                        <Anchors>
                            <Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT" x="0" y="-3"/>
                            <Anchor point="TOPRIGHT" relativePoint="BOTTOMRIGHT"/>
                        </Anchors>
                        <Frames>
                            
                            <!--
                             NOTE:
                            - This creates a UI 'Button' element named '$parentResetBuildButton'.
                            - It inherits from 'StandardButtonTemplate' (a built-in template that provides default look/behavior).
                            - 'parentKey' is a nickname used by Lua to find this child easily (example: self.ResetBuildButton).
                            -->
                            <Button name="$parentResetBuildButton" parentKey="ResetBuildButton" text="RESET_BUILD" motionScriptsWhileDisabled="true" inherits="StandardButtonTemplate">
                                <Size x="180" y="24"/> 
                                <Anchors>
                                    <Anchor point="CENTER" relativePoint="CENTER" x="0" y="2"/>
                                </Anchors>
                                <Scripts>
                                    <!--  NOTE: The code inside <OnLoad> is Lua that runs for this UI callback. -->
                                    <OnLoad>
                                        if IsDefaultClass("player") then
                                            self:SetText(RESET_ALL_TALENTS)
                                            self.tooltipTitle = RESET_ALL_TALENTS
                                            self.tooltipText = RESET_ALL_TALENTS_TOOLTIP
                                        else
                                            self:SetText(RESET_BUILD)
                                            self.tooltipTitle = RESET_BUILD
                                            self.tooltipText = RESET_BUILD_TOOLTIP
                                        end
                                        MagicButton_OnLoad(self)
                                    </OnLoad>
                                    <!--  NOTE: The code inside <OnClick> is Lua that runs for this UI callback. -->
                                    <OnClick>
                                        if IsDefaultClass("player") then
                                            CharacterAdvancementUtil.ConfirmOrUnlearnAllTalents()
                                        else
                                            CharacterAdvancementUtil.ConfirmClearBuild()
                                        end
                                    </OnClick>
                                    <!--  NOTE: The code inside <OnEnter> is Lua that runs for this UI callback. -->
                                    <OnEnter>
                                        GameTooltip_GenericTooltip(self, "ANCHOR_TOP")
                                        if self.tooltipExtra then
                                            GameTooltip:AddLine(self.tooltipExtra, RED_FONT_COLOR.r, RED_FONT_COLOR.g, RED_FONT_COLOR.b, true)
                                            GameTooltip:Show()
                                        end
                                    </OnEnter>
                                    <!--  NOTE: The code inside <OnLeave> is Lua that runs for this UI callback. -->
                                    <OnLeave function="GameTooltip_Hide"/>
                                </Scripts>
                            </Button>

                          	<Frame name="$parentSpellCurrencyBar" parentKey="SpellCurrencyBar" inherits="CurrencyBarClassicTemplate">
                          		<Size x="303" y="19"/>
                                <Anchors>
                                    <Anchor point="BOTTOMLEFT" x="-1" y="4"/>
                                </Anchors>
                            </Frame>

                            <!--
                             NOTE:
                            - This creates a UI 'Frame' element named '$parentTalentCurrencyBar'.
                            - It inherits from 'CurrencyBarClassicTemplate' (a built-in template that provides default look/behavior).
                            - 'parentKey' is a nickname used by Lua to find this child easily (example: self.TalentCurrencyBar).
                            -->
                            <Frame name="$parentTalentCurrencyBar" parentKey="TalentCurrencyBar" inherits="CurrencyBarClassicTemplate">
                            	<Size x="250" y="19"/>
                                <Anchors>
                                	<Anchor point="BOTTOMRIGHT" x="-3" y="4"/>
                                </Anchors>
                            </Frame>

                            <Button name="$parentSaveChangesButton" parentKey="SaveChangesButton" hidden="true" text="SAVE_CHANGES" inherits="RedButtonTemplate">
                                <Size x="172" y="40"/>
                                <Anchors>
                                    <Anchor point="CENTER" x="0" y="0"/>
                                </Anchors>

                                <Layers>
                                    <Layer level="BORDER">
                                        <!--
                                         NOTE:
                                        - This creates a UI 'FontString' element named '$parentErrorText'.
                                        - It inherits from 'GameFontRed' (a built-in template that provides default look/behavior).
                                        - 'parentKey' is a nickname used by Lua to find this child easily (example: self.ErrorText).
                                        - Starts hidden until Lua shows it.
                                        -->
                                        <FontString name="$parentErrorText" parentKey="ErrorText" hidden="true" inherits="GameFontRed">
                                            <Anchors>
                                                <Anchor point="TOP" x="0" y="48"/>
                                            </Anchors>
                                        </FontString>
                                    </Layer>
                                    <Layer level="BACKGROUND">
                                        <Texture parentKey="YellowGlowLeft" name="$parentYellowGlowLeft" alphaMode="ADD">
                                            <Anchors>
                                                <Anchor point="LEFT" x="-24" y="0"/>
                                            </Anchors>
                                        </Texture>
                                        <!--
                                         NOTE:
                                        - This creates a UI 'Texture' element named '$parentYellowGlowRight'.
                                        - 'parentKey' is a nickname used by Lua to find this child easily (example: self.YellowGlowRight).
                                        -->
                                        <Texture parentKey="YellowGlowRight" name="$parentYellowGlowRight" alphaMode="ADD">
                                            <Anchors>
                                                <Anchor point="RIGHT" x="24" y="0"/>
                                            </Anchors>
                                        </Texture>
                                        <Texture parentKey="YellowGlowMiddle" name="$parentYellowGlowMiddle" alphaMode="ADD">
                                            <Anchors>
                                                <Anchor point="TOPLEFT" relativeTo="$parentYellowGlowLeft" relativePoint="TOPRIGHT" x="0" y="0"/>
                                                <Anchor point="BOTTOMRIGHT" relativeTo="$parentYellowGlowRight" relativePoint="BOTTOMLEFT" x="0" y="0"/>
                                            </Anchors>
                                        </Texture>
                                        <!--
                                         NOTE:
                                        - This creates a UI 'Texture' element named '$parentShadow'.
                                        - 'parentKey' is a nickname used by Lua to find this child easily (example: self.Shadow).
                                        - Starts hidden until Lua shows it.
                                        -->
                                        <Texture name="$parentShadow" parentKey="Shadow" hidden="true" file="Interface\AddOns\AwAddons\Textures\Collections\Shadow">
                                            <Size x="512" y="64"/>
                                            <Anchors>
                                                <Anchor point="CENTER" relativeTo="$parentErrorText" relativePoint="CENTER" x="0" y="0"/>
                                            </Anchors>
                                        </Texture>
                                    </Layer>
                                </Layers>

                                <Scripts>
                                    <!--  NOTE: The code inside <OnLoad> is Lua that runs for this UI callback. -->
                                    <OnLoad>
                                        self:SetFrameLevel(99)
                                        self.YellowGlowLeft:SetAtlas("newplayertutorial-yellowGlow-redbutton-left", Const.TextureKit.UseAtlasSize)
                                        self.YellowGlowRight:SetAtlas("newplayertutorial-yellowGlow-redbutton-right", Const.TextureKit.UseAtlasSize)
                                        self.YellowGlowMiddle:SetAtlas("newplayertutorial-yellowGlow-redbutton-middle", Const.TextureKit.IgnoreAtlasSize)
                                    </OnLoad>
                                </Scripts>
                            </Button>

                            <Button name="$parentUndoButton" parentKey="UndoButton" hidden="true" inherits="SquareIconButtonTemplate">
                                <Size x="42" y="42"/>
                                <Anchors>
                                    <Anchor point="LEFT" relativeTo="$parentSaveChangesButton" relativePoint="RIGHT" x="14" y="0"/>
                                </Anchors>

                                <Scripts>
                                    <!--  NOTE: The code inside <OnLoad> is Lua that runs for this UI callback. -->
                                    <OnLoad>
                                        self.Icon:SetAtlas("talents-button-reset", Const.TextureKit.IgnoreAtlasSize)
                                        self.Icon:SetSize(24, 24)
                                    </OnLoad>
                                </Scripts>
                            </Button>

                            <Button name="$parentShareBuildButton" parentKey="ShareBuildButton" text="SHARE_BUILD" inherits="StandardButtonTemplate">
                                <Size x="180" y="22"/>
                                <Anchors>
                                    <Anchor point="TOPRIGHT" x="-8"/>
                                </Anchors>

                                <Scripts>
                                    <!--  NOTE: The code inside <OnEnter> is Lua that runs for this UI callback. -->
                                    <OnEnter>
                                        GameTooltip:SetOwner(self, "ANCHOR_TOP")
                                        GameTooltip:SetText(SHARE_BUILD, 1, 1, 1)
                                        GameTooltip:AddLine(SHARE_BUILD_TOOLTIP, nil, nil, nil, true)
                                        GameTooltip:Show()
                                    </OnEnter>
                                    <!--  NOTE: The code inside <OnLeave> is Lua that runs for this UI callback. -->
                                    <OnLeave function="GameTooltip_Hide"/>
                                    <OnClick>
                                        PlaySound(SOUNDKIT.CHAT_SCROLL_BUTTON)
                                        local link = CharacterAdvancementUtil.GetBuildWebURL()
                                        if link then
                                        Internal_CopyToClipboard(link)
                                            SendSystemMessage(BUILD_URL_COPIED_TO_CLIPBOARD)
                                        end
                                    </OnClick>
                                </Scripts>
                            </Button>

                            <!--
                             NOTE:
                            - This creates a UI 'Button' element named '$parentImportBuildButton'.
                            - It inherits from 'StandardButtonTemplate' (a built-in template that provides default look/behavior).
                            - 'parentKey' is a nickname used by Lua to find this child easily (example: self.ImportBuildButton).
                            -->
                            <Button name="$parentImportBuildButton" parentKey="ImportBuildButton" text="IMPORT_BUILD" inherits="StandardButtonTemplate">
                                <Size x="180" y="22"/>
                                <Anchors>
                                    <Anchor point="BOTTOMRIGHT" x="-8" y="-4"/>
                                </Anchors>

                                <Scripts>
                                    <!--  NOTE: The code inside <OnClick> is Lua that runs for this UI callback. -->
                                    <OnClick>
                                        PlaySound(SOUNDKIT.CHAT_SCROLL_BUTTON)
                                        StaticPopup_Show("CHARACTER_ADVANCEMENT_IMPORT_PENDING_BUILD")
                                    </OnClick>
                                </Scripts>
                            </Button>
                        </Frames>
                    </Frame>

                    <Frame name="$parentLockTalentsFrame" parentKey="LockTalentsFrame" enableMouse="true" hidden="true">
                        <Size x="360" y="538"/>
                        <Anchors>
                            <Anchor point="BOTTOMRIGHT" x="-5" y="2"/>
                            <Anchor point="TOPRIGHT" x="-5" y="6"/>
                        </Anchors>
                        <Layers>
                            <Layer level="BACKGROUND">
                                <!--
                                 NOTE:
                                - This creates a UI 'Texture' element named '$parentBackground'.
                                - 'parentKey' is a nickname used by Lua to find this child easily (example: self.Background).
                                -->
                                <Texture parentKey="Background" name="$parentBackground">
                                    <Anchors>
                                        <Anchor point="TOPLEFT" x="0" y="0"/>
                                        <Anchor point="BOTTOMRIGHT" x="0" y="0"/>
                                    </Anchors>
                                    <Size x="369" y="536"/>
                                    <Color r="0.0" g="0.01" b="0.01" a="0.95"/>
                                </Texture>
                            </Layer>
                            <Layer level="ARTWORK">
                                <!--
                                 NOTE:
                                - This creates a UI 'FontString' element named '$parentText'.
                                - It inherits from 'GameFontRed' (a built-in template that provides default look/behavior).
                                - 'parentKey' is a nickname used by Lua to find this child easily (example: self.Text).
                                -->
                                <FontString name="$parentText" parentKey="Text" text="FEATURE_BECOMES_AVAILABLE_AT_LEVEL" inherits="GameFontRed">
                                    <Anchors>
                                        <Anchor point="CENTER"/>
                                    </Anchors>
                                </FontString>
                                <Texture file="Interface\LFGFRAME\UI-LFG-ICON-LOCK">
                                    <Anchors>
                                        <Anchor point="BOTTOM" relativeTo="$parentText" relativePoint="TOP" x="0" y="0"/>
                                    </Anchors>
                                    <Size x="32" y="32"/>
                                </Texture>
                            </Layer>
                        </Layers>
                    </Frame>
                    
                    <!--
                     NOTE:
                    - This creates a UI 'Frame' element named '$parentNineSlice'.
                    - It inherits from 'NineSlicePanelTemplate2' (a built-in template that provides default look/behavior).
                    - 'parentKey' is a nickname used by Lua to find this child easily (example: self.NineSlice).
                    -->
                    <Frame name="$parentNineSlice" parentKey="NineSlice" inherits="NineSlicePanelTemplate2">
                        <Anchors>
                            <Anchor point="TOPLEFT" y="10"/>
                            <Anchor point="BOTTOMRIGHT" x="-2"/>
                        </Anchors>

                        <Attributes>
                            <Attribute name="layoutType" value="InsetFrameTemplate"/>
                        </Attributes>
                    </Frame>

                    <!--
                     NOTE:
                    - This creates a UI 'Frame' element named '$parentNineSliceShadow'.
                    - It inherits from 'NineSlicePanelTemplate2' (a built-in template that provides default look/behavior).
                    - 'parentKey' is a nickname used by Lua to find this child easily (example: self.NineSliceShadow).
                    -->
                    <Frame name="$parentNineSliceShadow" parentKey="NineSliceShadow" inherits="NineSlicePanelTemplate2">
                        <Anchors>
                            <Anchor point="TOPLEFT" x="4" y="7"/>
                            <Anchor point="BOTTOMRIGHT" x="-6" y="2"/>
                        </Anchors>

                        <Attributes>
                            <Attribute name="layoutType" value="SmallShadowOverlay"/>
                        </Attributes>

                        <Scripts>
                            <!--  NOTE: The code inside <OnLoad> is Lua that runs for this UI callback. -->
                            <OnLoad>
                                MixinAndLoad(self, "NineSlicePanelMixin")
                                self:SetFrameLevel(self:GetParent().NineSlice:GetFrameLevel()-1)
                            </OnLoad>
                        </Scripts>
                    </Frame>

                    <EditBox name="$parentSearchBox" parentKey="SearchBox" inherits="SearchBoxTemplate" hidden="true">
                        <Size x="348" y="22"/>
                        <Anchors>
                            <Anchor point="BOTTOMLEFT" relativePoint="TOPLEFT" x="328" y="12"/>
                        </Anchors>
                        
                        <Scripts>
                            <OnTextChanged>
                                SearchBoxTemplate_OnTextChanged(self)
                                if self:IsVisible() then
                                    CharacterAdvancement:BrowserSearch(self:GetText():trim())
                                end
                            </OnTextChanged>
                        </Scripts>
                    </EditBox>

                    <!--
                     NOTE:
                    - This creates a UI 'Frame' element named '$parentAbilityBrowser'.
                    - It inherits from 'ScrollListTemplate' (a built-in template that provides default look/behavior).
                    - 'parentKey' is a nickname used by Lua to find this child easily (example: self.AbilityBrowser).
                    - Starts hidden until Lua shows it.
                    -->
                    <Frame name="$parentAbilityBrowser" parentKey="AbilityBrowser" hidden="true" inherits="ScrollListTemplate">
                        <Size x="803" y="546"/>
                        <Anchors>
                            <Anchor point="BOTTOMLEFT"/>
                        </Anchors>
                        <Layers>
                            <Layer level="OVERLAY">
                                <FontString inherits="GameFontDisableLarge" parentKey="NoSearchResults" text="ENCHANT_COLLECTION_EMPTY_SEARCH">
                                    <Anchors>
                                        <Anchor point="CENTER"/>
                                    </Anchors>
                                </FontString>
                            </Layer>
                        </Layers>
                        <Scripts>
                            <!--  NOTE: The code inside <OnLoad> is Lua that runs for this UI callback. -->
                            <OnLoad>
                                self.ScrollFrame:SetHeight(self:GetHeight()-10) -- fix glitch
                                self.InsetFrame:Hide()
                                MixinAndLoadScripts(self, "CABrowserMixin")
                            </OnLoad>
                        </Scripts>
                    </Frame>

                    <Frame name="$parentTalentBrowser" parentKey="TalentBrowser" hidden="true" inherits="ScrollListTemplateNoScrollBar">
                        <Size x="803" y="650"/>
                        <Anchors>
                            <Anchor point="BOTTOMLEFT"/>
                        </Anchors>

                        <Frames>
                            <!--
                             NOTE:
                            - This creates a UI 'Frame' element named '$parentTalentGlobalLockFrame'.
                            - 'parentKey' is a nickname used by Lua to find this child easily (example: self.TalentGlobalLockFrame).
                            - Starts hidden until Lua shows it.
                            -->
                            <Frame name="$parentTalentGlobalLockFrame" hidden="true" parentKey="TalentGlobalLockFrame">
                                <Anchors>
                                    <Anchor point="TOPLEFT"/>
                                    <Anchor point="BOTTOMRIGHT"/>
                                </Anchors>

                                <Layers>
                                    <Layer level="ARTWORK">
                                        <Texture name="$parentGateOverlay" hidden="true" parentKey="GateOverlay">
                                            <Anchors>
                                                <Anchor point="TOPLEFT"/>
                                                <Anchor point="BOTTOMRIGHT"/>
                                            </Anchors>
                                            <Color r="0" g="0" b="0" a="0.5"/>
                                        </Texture>

                                        <!--
                                         NOTE:
                                        - This creates a UI 'Texture' element named '$parentGateOverlayBlend'.
                                        - 'parentKey' is a nickname used by Lua to find this child easily (example: self.GateOverlayBlend).
                                        - Starts hidden until Lua shows it.
                                        -->
                                        <Texture name="$parentGateOverlayBlend" hidden="true" parentKey="GateOverlayBlend">
                                            <Anchors>
                                                <Anchor point="BOTTOMLEFT" relativeTo="$parentGateOverlay" relativePoint="TOPLEFT"/>
                                                <Anchor point="TOPRIGHT" relativeTo="$parentGateOverlay" relativePoint="TOPRIGHT" x="0" y="16"/>
                                            </Anchors>
                                        </Texture>

                                        <Texture parentKey="Shadow" name="$parentShadow">
                                            <Size x="803" y="32"/>
                                            <Anchors>
                                                <Anchor point="TOP" x="0" y="2"/>
                                            </Anchors>
                                        </Texture>
                                    </Layer>

                                    <Layer level="OVERLAY">
                                        <!--
                                         NOTE:
                                        - This creates a UI 'FontString' element named '$parentText'.
                                        - It inherits from 'GameFontNormal' (a built-in template that provides default look/behavior).
                                        - 'parentKey' is a nickname used by Lua to find this child easily (example: self.Text).
                                        -->
                                        <FontString name="$parentText" parentKey="Text" text="FEATURE_BECOMES_AVAILABLE_AT_LEVEL" inherits="GameFontNormal">
                                            <Anchors>
                                                <Anchor point="TOP" x="0" y="-8"/>
                                            </Anchors>
                                        </FontString>
                                    </Layer>

                                    <Layer level="BORDER">
                                        <Texture name="$parentLine" parentKey="Line">
                                            <Size x="803" y="2"/>
                                            <Anchors>
                                                <Anchor point="TOP" x="0" y="-14"/>
                                            </Anchors>
                                        </Texture>
                                    </Layer>
                                </Layers>
                            </Frame>
                        </Frames>

                        <Scripts>
                            <!--  NOTE: The code inside <OnLoad> is Lua that runs for this UI callback. -->
                            <OnLoad>
                                self.TalentGlobalLockFrame.Shadow:SetAtlas("common-shadow-circle", Const.TextureKit.IgnoreAtlasSize)
                                self.TalentGlobalLockFrame.Line:SetAtlas("levelup-line-white", Const.TextureKit.IgnoreAtlasSize)
                                self.TalentGlobalLockFrame.Line:SetVertexColor(1, 0.44, 0.26)

                                --self.TalentGlobalLockFrame.GateOverlayBlend:SetAlpha(0.5)
                                --self.TalentGlobalLockFrame.GateOverlayBlend:SetAtlas("_help-box-shadow-top", Const.TextureKit.IgnoreAtlasSize)
                                self.TalentGlobalLockFrame:SetFrameLevel(self:GetFrameLevel()+10)
                                self.InsetFrame:Hide()
                                MixinAndLoadScripts(self, "CATalentBrowserMixin")
                            </OnLoad>
                        </Scripts>
                    </Frame>
                    
                    <!--
                     NOTE:
                    - This creates a UI 'Button' element named '$parentFilter'.
                    - It inherits from 'FilterDropDownButtonTemplate' (a built-in template that provides default look/behavior).
                    - 'parentKey' is a nickname used by Lua to find this child easily (example: self.Filter).
                    - Starts hidden until Lua shows it.
                    -->
                    <Button name="$parentFilter" parentKey="Filter" inherits="FilterDropDownButtonTemplate" hidden="true">
                        <Size x="126" y="22"/>
                        <Anchors>
                            <Anchor point="LEFT" relativeTo="$parentSearchBox" relativePoint="RIGHT"/>
                        </Anchors>
                    </Button>

                    <Frame name="$parentSpellTagFrame" parentKey="SpellTagFrame" hidden="true">
                        <Size x="256" y="0"/>

                        <Layers>
                            <Layer level="BACKGROUND">
                                <!--
                                 NOTE:
                                - This creates a UI 'Texture' element named '$parentShadow'.
                                - 'parentKey' is a nickname used by Lua to find this child easily (example: self.Shadow).
                                -->
                                <Texture name="$parentShadow" parentKey="Shadow">
                                    <Anchors>
                                        <Anchor point="TOPLEFT"/>
                                        <Anchor point="BOTTOMRIGHT"/>
                                    </Anchors>
                                </Texture>
                            </Layer>

                            <Layer level="ARTWORK">
                                <FontString name="$parent.Text" justifyH="LEFT" parentKey="Text" inherits="GameFontDisableSmall" text="FILTERS">
                                    <Anchors>
                                        <Anchor point="TOPLEFT">
                                            <Offset>
                                                <AbsDimension x="8" y="-4"/>
                                            </Offset>
                                        </Anchor>
                                    </Anchors>
                                </FontString>
                            </Layer>                        
                        </Layers>

                        <Anchors>
                            <Anchor point="TOPRIGHT" x="-8" y="8"/>
                        </Anchors>

                        <Scripts>
                            <!--  NOTE: The code inside <OnLoad> is Lua that runs for this UI callback. -->
                            <OnLoad>
                                self.Shadow:SetTexture("Interface\\AddOns\\AwAddons\\Textures\\Collections\\Shadow")
                                self:SetFrameLevel(self:GetParent().AbilityBrowser:GetFrameLevel()+8)
                                MixinAndLoadScripts(self, "CASpellTagFrameMixin")
                            </OnLoad>
                        </Scripts>
                    </Frame>
                </Frames>
                
                <Layers>
                    <Layer level="BORDER">
                        <!--
                         NOTE:
                        - This creates a UI 'Texture' element named '$parentShadowOverlay'.
                        - 'parentKey' is a nickname used by Lua to find this child easily (example: self.ShadowOverlay).
                        -->
                        <Texture name="$parentShadowOverlay" parentKey="ShadowOverlay" file="Interface\COMMON\ShadowOverlay-Right">
                            <Anchors>
                                <Anchor point="TOPRIGHT" x="-2" y="7"/>
                                <Anchor point="BOTTOMRIGHT" x="-256"/>
                            </Anchors>
                        </Texture>

                        <Texture name="$parentSpellsOverlay" parentKey="SpellsOverlay" alpha="0.4">
                            <Size x="256" y="256"/>
                            <Anchors>
                                <Anchor point="CENTER" relativePoint="LEFT" x="218" y="20"/>
                            </Anchors>
                        </Texture>

                        <!--
                         NOTE:
                        - This creates a UI 'Texture' element named '$parentBrowserArtwork'.
                        - 'parentKey' is a nickname used by Lua to find this child easily (example: self.BrowserArtwork).
                        -->
                        <Texture name="$parentBrowserArtwork" parentKey="BrowserArtwork" alpha="0.6" file="Interface\callboard\atlas_10">
                            <Size x="349" y="258"/>
                            <TexCoords  left="0.432" right="1" top="0.5791" bottom="1"/>
                            <Anchors>
                                <Anchor point="CENTER" x="0" y="0"/>
                            </Anchors>
                        </Texture>   

                        <Texture name="$parentBackgroundHeaderAdd" parentKey="BackgroundHeaderAdd">
                            <Anchors>
                                <Anchor point="TOPLEFT" x="2" y="17"/>
                                <Anchor point="BOTTOMRIGHT" x="-2" y="64"/>
                            </Anchors>
                        </Texture>
                    </Layer>  

                    <Layer level="ARTWORK">
                        <!--
                         NOTE:
                        - This creates a UI 'Texture' element named '$parentCornerTL'.
                        - 'parentKey' is a nickname used by Lua to find this child easily (example: self.CornerTL).
                        -->
                        <Texture name="$parentCornerTL" parentKey="CornerTL" file="Interface\CharacterAdvancement\caCorner">
                            <Size x="32" y="32" />
                            <Anchors>
                                <Anchor point="TOPLEFT" x="1" y="6"/>
                            </Anchors>
                        </Texture>
                        <Texture name="$parentCornerTR" parentKey="CornerTR" file="Interface\CharacterAdvancement\caCorner">
                            <Size x="32" y="32" />
                            <Anchors>
                                <Anchor point="TOPRIGHT" x="-1" y="6"/>
                            </Anchors>
                            <TexCoords left="1" right="0" top="0" bottom="1"/>
                        </Texture>
                        <!--
                         NOTE:
                        - This creates a UI 'Texture' element named '$parentCornerBL'.
                        - 'parentKey' is a nickname used by Lua to find this child easily (example: self.CornerBL).
                        -->
                        <Texture name="$parentCornerBL" parentKey="CornerBL" file="Interface\CharacterAdvancement\caCorner">
                            <Size x="32" y="32" />
                            <Anchors>
                                <Anchor point="BOTTOMLEFT" x="1" y="2"/>
                            </Anchors>
                            <TexCoords left="0" right="1" top="1" bottom="0"/>
                        </Texture>
                        <Texture name="$parentCornerBR" parentKey="CornerBR" file="Interface\CharacterAdvancement\caCorner">
                            <Size x="32" y="32" />
                            <Anchors>
                                <Anchor point="BOTTOMRIGHT" x="-1" y="2"/>
                            </Anchors>
                            <TexCoords left="1" right="0" top="1" bottom="0"/>
                        </Texture>
                        <!--
                         NOTE:
                        - This creates a UI 'Texture' element named '$parentScrollTop'.
                        - 'parentKey' is a nickname used by Lua to find this child easily (example: self.ScrollTop).
                        - Starts hidden until Lua shows it.
                        -->
                        <Texture name="$parentScrollTop" parentKey="ScrollTop" file="Interface\PaperDollInfoFrame\UI-Character-ScrollBar" hidden="true">
                            <Size x="27" y="48"/>
                            <Anchors>
                                <Anchor point="TOPRIGHT" x="22" y="10"/>
                            </Anchors>
                            <TexCoords left="0" right="0.484375" top="0" bottom=".20"/>
                        </Texture>
                        <Texture name="$parentScrollBottom" parentKey="ScrollBottom" file="Interface\PaperDollInfoFrame\UI-Character-ScrollBar" hidden="true">
                            <Size x="27" y="64"/>
                            <Anchors>
                                <Anchor point="BOTTOMRIGHT" x="22" y="0"/>
                            </Anchors>
                            <TexCoords left="0.515625" right="1.0" top="0.1440625" bottom="0.4140625"/>
                        </Texture>
                        <!--
                         NOTE:
                        - This creates a UI 'Texture' element named '$parentScrollMiddle'.
                        - 'parentKey' is a nickname used by Lua to find this child easily (example: self.ScrollMiddle).
                        - Starts hidden until Lua shows it.
                        -->
                        <Texture name="$parentScrollMiddle" parentKey="ScrollMiddle" file="Interface\PaperDollInfoFrame\UI-Character-ScrollBar" hidden="true">
                            <Anchors>
                                <Anchor point="TOPLEFT" relativeTo="$parentScrollTop" relativePoint="BOTTOMLEFT"/>
                                <Anchor point="BOTTOMRIGHT" relativeTo="$parentScrollBottom" relativePoint="TOPRIGHT"/>
                            </Anchors>
                            <TexCoords left="0" right="0.484375" top="0.1640625" bottom="1"/>
                        </Texture>
                    </Layer>

                   <Layer level="BACKGROUND">
                        <!--
                         NOTE:
                        - This creates a UI 'Texture' element named '$parentBackground'.
                        - 'parentKey' is a nickname used by Lua to find this child easily (example: self.Background).
                        -->
                        <Texture name="$parentBackground" parentKey="Background">
                            <Anchors>
                                <Anchor point="TOPLEFT" x="2" y="7"/>
                                <Anchor point="BOTTOMRIGHT" x="-2"/>
                            </Anchors>
                        </Texture>
                        <Texture name="$parentScrollBackground" parentKey="ScrollBackground" hidden="true">
                            <Color r="0" g="0" b="0" a="0.8"/>
                           <Anchors>
                                <Anchor point="TOPLEFT" relativeTo="$parentScrollTop" relativePoint="TOPLEFT"/>
                                <Anchor point="BOTTOMRIGHT" relativeTo="$parentScrollBottom" relativePoint="BOTTOMRIGHT"/>
                            </Anchors>
                        </Texture>
                    </Layer>
                </Layers>
                
                <Scripts>
                    <!--  NOTE: The code inside <OnLoad> is Lua that runs for this UI callback. -->
                    <OnLoad>
                        ScrollFrame_OnLoad(self);
                        self.scrollbar = _G[self:GetName().."ScrollBar"]
                        self.scrollUpButton = _G[self.scrollbar:GetName().."ScrollUpButton"]
                        self.scrollDownButton = _G[self.scrollbar:GetName().."ScrollDownButton"]
                        self.scrollbar:SetPoint("TOPLEFT", self, "TOPRIGHT", 2, -9)
                        self.scrollbar:SetPoint("BOTTOMLEFT", self, "BOTTOMRIGHT", 2, 17)

                        self.scrollbar:Hide()
                    </OnLoad>
                    <OnMouseWheel>
                        local maxOffset = self:GetVerticalScrollRange()
                        local scroll = math.clamp(self:GetVerticalScroll() - (delta * 11), 0, maxOffset)
                        self:SetVerticalScroll(scroll)

                        ScrollFrameTemplate_OnMouseWheel(self, delta)
                    </OnMouseWheel>
                </Scripts>

                <ScrollChild>
                    <!--
                     NOTE:
                    - This creates a UI 'Frame' element named '$parentScrollChild'.
                    - 'parentKey' is a nickname used by Lua to find this child easily (example: self.ScrollChild).
                    -->
                    <Frame name="$parentScrollChild" parentKey="ScrollChild">
                        <Size x="802" y="536"/>
                        <Anchors>
                            <Anchor point="TOPLEFT"/>
                            <Anchor point="BOTTOMRIGHT"/>
                        </Anchors>

                        <Frames>
                            <Frame name="$parentSpells" parentKey="Spells">
                                <Size x="433" y="536"/>
                                <Anchors>
                                    <Anchor point="TOPLEFT"/>
                                    <Anchor point="BOTTOMRIGHT" relativePoint="BOTTOM" x="32"/>
                                </Anchors>
                            </Frame>

                            <!--
                             NOTE:
                            - This creates a UI 'Frame' element named '$parentTalents'.
                            - 'parentKey' is a nickname used by Lua to find this child easily (example: self.Talents).
                            -->
                            <Frame name="$parentTalents" parentKey="Talents">
                                <Size x="369" y="536"/>
                                <Anchors>
                                    <Anchor point="TOPLEFT" relativeTo="$parentSpells" relativePoint="TOPRIGHT"/>
                                    <Anchor point="BOTTOMRIGHT"/>
                                </Anchors>
                                <Frames>
                                    <Frame name="$parentGateDisappearanceFrame" parentKey="GateDisappearanceFrame">
                                        <Size x="64" y="64"/>
                                        <Layers>
                                            <Layer level="BACKGROUND">
                                                <!--
                                                 NOTE:
                                                - This creates a UI 'Texture' element named '$parentGlow'.
                                                - 'parentKey' is a nickname used by Lua to find this child easily (example: self.Glow).
                                                -->
                                                <Texture name="$parentGlow" file="SPELLS\7fx_flash_shard" alpha="0" parentKey="Glow" alphaMode="ADD">
                                                    <Size x="1" y="1"/>
                                                    <Anchors>
                                                        <Anchor point="CENTER" x="0" y="0"/>
                                                    </Anchors>
                                                    <Animations>
                                                        <AnimationGroup parentKey="Explosion">
                                                            <Scale duration="0.2" scaleX="100" scaleY="100" order="1"/>
                                                            <Alpha change="1" duration="0.2" smoothing="IN_OUT" order="1"/>
                                                            <Alpha change="-1" duration="0.5" smoothing="OUT" order="2"/>
                                                            <Scale duration="0.5" scaleX="0.5" scaleY="0.5" order="2"/>
                                                        </AnimationGroup>
                                                    </Animations>
                                                    <Color r="0.2" g="0.7" b="1"/>
                                                </Texture>
                                                <!--
                                                 NOTE:
                                                - This creates a UI 'Texture' element named '$parentShockwave'.
                                                - 'parentKey' is a nickname used by Lua to find this child easily (example: self.Shockwave).
                                                -->
                                                <Texture name="$parentShockwave" alphaMode="ADD" file="SPELLS\7fx_alphamask_shockwavesoft_contrast_256" alpha="0" parentKey="Shockwave">
                                                    <Size x="20" y="20"/>
                                                    <Anchors>
                                                        <Anchor point="CENTER" x="0" y="0"/>
                                                    </Anchors>
                                                    <Animations>
                                                        <AnimationGroup parentKey="Explosion">
                                                            <Scale duration="2" scaleX="10" scaleY="10" order="1"/>
                                                            <Rotation degrees="-90" duration="1" smoothing="IN_OUT" order="1"/>
                                                            <Alpha change="1" duration="0.2" smoothing="IN" order="1"/>
                                                            <Alpha change="-1" duration="0.6" smoothing="OUT" order="1" startDelay="0.4"/>
                                                        </AnimationGroup>
                                                    </Animations>
                                                    <Color r="0.2" g="0.7" b="1"/>
                                                </Texture>
                                            </Layer>
                                        </Layers>
                                    </Frame>
                                </Frames>
                            </Frame>
                        </Frames>
                    </Frame>
                </ScrollChild>
            </ScrollFrame>
            
            <!--
             NOTE:
            - This creates a UI 'Frame' element named '$parentSideBar'.
            - 'parentKey' is a nickname used by Lua to find this child easily (example: self.SideBar).
            -->
            <Frame name="$parentSideBar" parentKey="SideBar">
                <Size x="198" y="570"/>
                <Anchors>
                    <Anchor point="TOPLEFT" relativeTo="$parentContent" relativePoint="TOPRIGHT" x="1" y="10"/>
                    <Anchor point="BOTTOMRIGHT" x="-2" y="2"/>
                </Anchors>

                <Layers>
                    <Layer level="BACKGROUND">
                        <Texture name="$parentBackground" file="Interface\FrameGeneral\UI-Background-Marble" vertTile="true" horizTile="true">
	                        <Anchors>
	                            <Anchor point="TOPLEFT" x="2" y="-2"/>
	                            <Anchor point="BOTTOMRIGHT" x="-2" y="2"/>
	                        </Anchors>
                        </Texture>
                    </Layer>
                </Layers>
                
                <Frames>
                    <!--
                     NOTE:
                    - This creates a UI 'Frame' element named '$parentSpellList'.
                    - It inherits from 'StandardProportionalScrollListTemplate' (a built-in template that provides default look/behavior).
                    - 'parentKey' is a nickname used by Lua to find this child easily (example: self.SpellList).
                    - Starts hidden until Lua shows it.
                    -->
                    <Frame name="$parentSpellList" parentKey="SpellList" inherits="StandardProportionalScrollListTemplate" hidden="true">
                        <Size x="206" y="460"/>
                        <Anchors>
                            <Anchor point="TOPLEFT" y="-96"/>
                        </Anchors>
                        
                        <Frames>
                            <Frame name="$parentNineSlice" parentKey="NineSlice" inherits="NineSlicePanelTemplate2">
                                <Anchors>
                                    <Anchor point="TOPLEFT" x="-2" y="2"/>
                                    <Anchor point="BOTTOMRIGHT" x="22"/>
                                </Anchors>

                                <Attributes>
                                    <Attribute name="layoutType" value="InsetFrameTemplate"/>
                                </Attributes>
                                
                                <Scripts>
                                    <!--  NOTE: The code inside <OnLoad> is Lua that runs for this UI callback. -->
                                    <OnLoad>
                                        MixinAndLoadScripts(self, "NineSlicePanelMixin")
                                        self:SetFrameLevel(self:GetParent():GetFrameLevel() + 10)
                                    </OnLoad>
                                </Scripts>
                            </Frame>

                            <Frame name="$parentHeader" parentKey="Header">
                                <Size x="228" y="86"/>
                                <Anchors>
                                    <Anchor point="BOTTOMLEFT" relativePoint="TOPLEFT"/>
                                </Anchors>
                                <Layers>
                                    <Layer level="BACKGROUND">
                                        <!--
                                         NOTE:
                                        - This creates a UI 'Texture' element named '$parentBackground'.
                                        - 'parentKey' is a nickname used by Lua to find this child easily (example: self.Background).
                                        -->
                                        <Texture name="$parentBackground" parentKey="Background" file="Interface\FrameGeneral\UI-Background-Rock2" vertTile="true" horizTile="true" setAllPoints="true"/>
                                    </Layer>
                                </Layers>
                                
                                <Frames>
                                    <Frame name="$parentNineSlice" parentKey="NineSlice" inherits="NineSlicePanelTemplate2">
                                        <Anchors>
                                            <Anchor point="TOPLEFT"/>
                                            <Anchor point="BOTTOMRIGHT" y="30"/>
                                        </Anchors>

                                        <Frames>
                                            <!--
                                             NOTE:
                                            - This creates a UI 'Button' element named '$parentPrimaryStat1'.
                                            - It inherits from 'CAPrimaryStatButtonTemplate' (a built-in template that provides default look/behavior).
                                            - 'parentKey' is a nickname used by Lua to find this child easily (example: self.PrimaryStat1).
                                            -->
                                            <Button name="$parentPrimaryStat1" parentKey="PrimaryStat1" inherits="CAPrimaryStatButtonTemplate">
                                                <Anchors>
                                                    <Anchor point="LEFT" x="12" y="0"/>
                                                </Anchors>

                                                <Scripts>
                                                    <!--  NOTE: The code inside <OnClick> is Lua that runs for this UI callback. -->
                                                    <OnClick>
                                                        if ForcedPrimaryStatFrame and ForcedPrimaryStatFrame:IsVisible() then
                                                            ForcedPrimaryStatFrame:OnPrimaryStatSelected()
                                                        else
                                                            ShowForcedPrimaryStat(true, true)
                                                        end
                                                    </OnClick>
                                                </Scripts>
                                            </Button>
                                        </Frames>

                                        <Layers>
                                            <Layer level="BACKGROUND">
                                                <!--
                                                 NOTE:
                                                - This creates a UI 'Texture' element named '$parentBackground'.
                                                - 'parentKey' is a nickname used by Lua to find this child easily (example: self.Background).
                                                -->
                                                <Texture name="$parentBackground" parentKey="Background" setAllPoints="true"/>
                                            </Layer>

                                            <Layer level="ARTWORK">
                                                <FontString name="$parentHintText" parentKey="HintText" text="NO_PRIMARY_STAT" justifyH="LEFT" inherits="GameFontDisableLarge">
                                                    <Size x="192" y="32"/>
                                                    <Anchors>
                                                        <Anchor point="LEFT" relativeTo="$parentPrimaryStat1" relativePoint="RIGHT" x="0" y="8"/>
                                                    </Anchors>
                                                </FontString>
                                                <!--
                                                 NOTE:
                                                - This creates a UI 'FontString' element named '$parentSelectedStatText'.
                                                - It inherits from 'GameFontHighlight' (a built-in template that provides default look/behavior).
                                                - 'parentKey' is a nickname used by Lua to find this child easily (example: self.SelectedStatText).
                                                -->
                                                <FontString name="$parentSelectedStatText" parentKey="SelectedStatText" justifyH="LEFT" text="Selected Stat: Agility" inherits="GameFontHighlight"/>
                                                <!--<FontString name="$parentSelectedStatText2" parentKey="SelectedStatText2" justifyH="RIGHT" text="Selected Stat: Agility" inherits="GameFontHighlight"/>-->
                                            </Layer>
                                        </Layers>

                                        <Attributes>
                                            <Attribute name="layoutType" value="InsetFrameTemplate"/>
                                        </Attributes>

                                        <Scripts>
                                            <!--  NOTE: The code inside <OnLoad> is Lua that runs for this UI callback. -->
                                            <OnLoad>
                                                self.PrimaryStat1.isControlButton = true
                                                MixinAndLoad(self, "NineSlicePanelMixin")
                                                self.SelectedStatText:ClearAndSetPoint("LEFT", self.PrimaryStat1, "RIGHT", 8, 0)
                                                self.HintText:ClearAndSetPoint("LEFT", self.PrimaryStat1, "RIGHT", 8, 0)
                                            </OnLoad>
                                        </Scripts>
                                    </Frame>

                                    <EditBox name="$parentSearchBox" parentKey="SearchBox" inherits="SearchBoxTemplate">
                                        <Size x="130" y="22"/>
                                        <Anchors>
                                            <Anchor point="BOTTOMLEFT" x="9" y="4"/>
                                        </Anchors>
                                        
                                        <Scripts>
                                            <OnTextChanged>
                                                SearchBoxTemplate_OnTextChanged(self)
                                                if self:IsVisible() then
                                                    CharacterAdvancement:Search(self:GetText():trim())
                                                end
                                            </OnTextChanged>
                                        </Scripts>
                                    </EditBox>
                                    
                                    <!--
                                     NOTE:
                                    - This creates a UI 'Button' element named '$parentFilter'.
                                    - It inherits from 'FilterDropDownButtonTemplate' (a built-in template that provides default look/behavior).
                                    - 'parentKey' is a nickname used by Lua to find this child easily (example: self.Filter).
                                    -->
                                    <Button name="$parentFilter" parentKey="Filter" inherits="FilterDropDownButtonTemplate">
                                        <Size x="86" y="22"/>
                                        <Anchors>
                                            <Anchor point="LEFT" relativeTo="$parentSearchBox" relativePoint="RIGHT"/>
                                        </Anchors>
                                    </Button>
                                </Frames>
                            </Frame>

                            <Frame name="$parentFooter" parentKey="Footer" inherits="NineSlicePanelTemplate2">
                                <Size x="226" y="22"/>
                                <Anchors>
                                    <Anchor point="TOPLEFT" relativePoint="BOTTOMLEFT"/>
                                </Anchors>
                                
                                <Attributes>
                                    <Attribute name="layoutType" value="InsetFrameTemplate"/>
                                </Attributes>
                                
                                <Layers>
                                    <Layer level="BACKGROUND">
                                        <!--
                                         NOTE:
                                        - This creates a UI 'Texture' element named '$parentBackground'.
                                        - 'parentKey' is a nickname used by Lua to find this child easily (example: self.Background).
                                        -->
                                        <Texture name="$parentBackground" parentKey="Background" setAllPoints="true"/>
                                    </Layer>
                                </Layers>
                                
                                <Frames>
                                    <Button name="$parentFlyoutButton" parentKey="FlyoutButton" text="SHOW_RARITIES" hidden="true" inherits="StandardButtonTemplate">
                                        <Size x="244" y="20"/>
                                        <Anchors>
                                            <Anchor point="CENTER" x="1"/>
                                        </Anchors>
                                        
                                        <Scripts>
                                            <!--  NOTE: The code inside <OnClick> is Lua that runs for this UI callback. -->
                                            <OnClick>
                                                CharacterAdvancement:ToggleRarityFlyout()
                                            </OnClick>
                                        </Scripts>
                                    </Button>

                                    <Frame name="$parentRarityCurrencyBar" parentKey="RarityCurrencyBar" inherits="CurrencyBarClassicTemplate" hidden="true">
                                        <Size x="226" y="19"/>
                                        <Anchors>
                                            <Anchor point="CENTER" y="0"/>
                                        </Anchors>
                                    </Frame>
                                    
                                    <!--
                                     NOTE:
                                    - This creates a UI 'Frame' element named '$parentRarityFlyout'.
                                    - It inherits from 'NineSlicePanelTemplate2' (a built-in template that provides default look/behavior).
                                    - 'parentKey' is a nickname used by Lua to find this child easily (example: self.RarityFlyout).
                                    - Starts hidden until Lua shows it.
                                    -->
                                    <Frame name="$parentRarityFlyout" parentKey="RarityFlyout" enableMouse="true" inherits="NineSlicePanelTemplate2" hidden="true">
                                        <Size x="250" y="106"/>
                                        <Anchors>
                                            <Anchor point="BOTTOM" relativePoint="TOP" x="0" y="-2"/>
                                        </Anchors>

                                        <Attributes>
                                            <Attribute name="layoutType" value="InsetFrameTemplate"/>
                                        </Attributes>
                                        
                                        <Layers>
                                            <Layer level="BACKGROUND">
                                                <!--
                                                 NOTE:
                                                - This creates a UI 'Texture' element named '$parentBackground'.
                                                - 'parentKey' is a nickname used by Lua to find this child easily (example: self.Background).
                                                -->
                                                <Texture name="$parentBackground" parentKey="Background" file="Interface\FrameGeneral\UI-Background-Marble" horizTile="true" vertTile="true">
                                                    <Anchors>
                                                        <Anchor point="TOPLEFT" x="1" y="-4"/>
                                                        <Anchor point="BOTTOMRIGHT" x="-1" y="1"/>
                                                    </Anchors>
                                                </Texture>
                                            </Layer>
                                        </Layers>
                                        
                                        <Frames>
                                            <!--
                                             NOTE:
                                            - This creates a UI 'Button' element named '$parentUncommon'.
                                            - It inherits from 'CARarityBarTemplate' (a built-in template that provides default look/behavior).
                                            - 'parentKey' is a nickname used by Lua to find this child easily (example: self.Uncommon).
                                            -->
                                            <Button name="$parentUncommon" parentKey="Uncommon" inherits="CARarityBarTemplate">
                                                <Size x="242" y="22"/>
                                                <Anchors>
                                                    <Anchor point="BOTTOM" y="4"/>
                                                </Anchors>
                                                <Attributes>
                                                    <Attribute name="quality" value="2" type="number"/>
                                                </Attributes>
                                            </Button>

                                            <!--
                                             NOTE:
                                            - This creates a UI 'Button' element named '$parentRare'.
                                            - It inherits from 'CARarityBarTemplate' (a built-in template that provides default look/behavior).
                                            - 'parentKey' is a nickname used by Lua to find this child easily (example: self.Rare).
                                            -->
                                            <Button name="$parentRare" parentKey="Rare" inherits="CARarityBarTemplate">
                                                <Size x="242" y="22"/>
                                                <Anchors>
                                                    <Anchor point="BOTTOM" relativeTo="$parentUncommon" relativePoint="TOP" y="2"/>
                                                </Anchors>
                                                <Attributes>
                                                    <Attribute name="quality" value="3" type="number"/>
                                                </Attributes>
                                            </Button>

                                            <!--
                                             NOTE:
                                            - This creates a UI 'Button' element named '$parentEpic'.
                                            - It inherits from 'CARarityBarTemplate' (a built-in template that provides default look/behavior).
                                            - 'parentKey' is a nickname used by Lua to find this child easily (example: self.Epic).
                                            -->
                                            <Button name="$parentEpic" parentKey="Epic" inherits="CARarityBarTemplate">
                                                <Size x="242" y="22"/>
                                                <Anchors>
                                                    <Anchor point="BOTTOM" relativeTo="$parentRare" relativePoint="TOP" y="2"/>
                                                </Anchors>
                                                <Attributes>
                                                    <Attribute name="quality" value="4" type="number"/>
                                                </Attributes>
                                            </Button>

                                            <!--
                                             NOTE:
                                            - This creates a UI 'Button' element named '$parentLegendary'.
                                            - It inherits from 'CARarityBarTemplate' (a built-in template that provides default look/behavior).
                                            - 'parentKey' is a nickname used by Lua to find this child easily (example: self.Legendary).
                                            -->
                                            <Button name="$parentLegendary" parentKey="Legendary" inherits="CARarityBarTemplate">
                                                <Size x="242" y="22"/>
                                                <Anchors>
                                                    <Anchor point="BOTTOM" relativeTo="$parentEpic" relativePoint="TOP" y="2"/>
                                                </Anchors>
                                                <Attributes>
                                                    <Attribute name="quality" value="5" type="number"/>
                                                </Attributes>
                                            </Button>
                                        </Frames>
                                    </Frame>
                                </Frames>
                            </Frame>
                        </Frames>
                    </Frame>
                    
                    <!--
                     NOTE:
                    - This creates a UI 'Frame' element named '$parentSpecList'.
                    - It inherits from 'StandardProportionalScrollListTemplate' (a built-in template that provides default look/behavior).
                    - 'parentKey' is a nickname used by Lua to find this child easily (example: self.SpecList).
                    - Starts hidden until Lua shows it.
                    -->
                    <Frame name="$parentSpecList" parentKey="SpecList" inherits="StandardProportionalScrollListTemplate" hidden="true">
                        <Size x="206" y="693"/>
                        <Anchors>
                            <Anchor point="TOPLEFT" y="-2"/>
                        </Anchors>
                        
                        <Frames>
                            <Frame name="$parentNineSlice" parentKey="NineSlice" inherits="NineSlicePanelTemplate2">
                                <Anchors>
                                    <Anchor point="TOPLEFT" x="-2" y="2"/>
                                    <Anchor point="BOTTOMRIGHT" x="22"/>
                                </Anchors>

                                <Attributes>
                                    <Attribute name="layoutType" value="InsetFrameTemplate"/>
                                </Attributes>
                                
                                <Scripts>
                                    <!--  NOTE: The code inside <OnLoad> is Lua that runs for this UI callback. -->
                                    <OnLoad>
                                        MixinAndLoadScripts(self, "NineSlicePanelMixin")
                                        self:SetFrameLevel(self:GetParent():GetFrameLevel() + 10)
                                    </OnLoad>
                                </Scripts>
                            </Frame>

                            <Frame name="$parentIconSelector" parentKey="IconSelector" hidden="true" inherits="IconSelectorFrameTemplate">
                                <Anchors>
                                    <Anchor point="TOPRIGHT" relativePoint="TOPLEFT" x="-8" y="0"/>
                                </Anchors>
                            </Frame>

                            <!--
                             NOTE:
                            - This creates a UI 'Frame' element named '$parentSelectFrame'.
                            - 'parentKey' is a nickname used by Lua to find this child easily (example: self.SelectFrame).
                            - Starts hidden until Lua shows it.
                            -->
                            <Frame name="$parentSelectFrame" parentKey="SelectFrame" hidden="true">
                                <Size x="228" y="154"/>
                                <Anchors>
                                    <Anchor point="TOP" y="-2"/>
                                </Anchors>

                                <Frames>
                                    <Button name="$parentCloseButton" parentKey="CloseButton" inherits="UIPanelCloseButton">
                                        <Size x="32" y="32"/>
                                        <Anchors>
                                            <Anchor point="TOPRIGHT" x="-2" y="-2"/>
                                        </Anchors>
                                    </Button>

                                    <!--
                                     NOTE:
                                    - This creates a UI 'Frame' element named '$parentScrollList'.
                                    - It inherits from 'ProportionalScrollListTemplate' (a built-in template that provides default look/behavior).
                                    - 'parentKey' is a nickname used by Lua to find this child easily (example: self.ScrollList).
                                    -->
                                    <Frame name="$parentScrollList" parentKey="ScrollList" inherits="ProportionalScrollListTemplate">
                                        <Size x="204" y="124"/>
                                        <Anchors>
                                            <Anchor point="TOPLEFT" x="2" y="-28"/>
                                        </Anchors>
                                    </Frame>
                                </Frames>

                                <Backdrop bgFile="Interface\Buttons\WHITE8x8" edgeFile="Interface\Tooltips\UI-Tooltip-Border" tile="true">
                                    <Color r="0" g="0" b="0" a="0.9"/>
                                    <EdgeSize val="16"/>
                                    <TileSize val="16"/>
                                    <BackgroundInsets left="5" right="5" top="5" bottom="5"/>
                                </Backdrop>
                            </Frame>
                        </Frames>
                        
                        <Scripts>
                            <!--  NOTE: The code inside <OnShow> is Lua that runs for this UI callback. -->
                            <OnShow>
                                self:OnShow()
                                self:RegisterEvent("ASCENSION_CA_SPECIALIZATION_ACTIVE_ID_CHANGED")
                            </OnShow>
                            <OnHide>
                                self:UnregisterEvent("ASCENSION_CA_SPECIALIZATION_ACTIVE_ID_CHANGED")
                                self.SelectFrame:Hide()
                            </OnHide>
                            <!--  NOTE: The code inside <OnEvent> is Lua that runs for this UI callback. -->
                            <OnEvent>
                                self:RefreshScrollFrame()
                            </OnEvent>
                        </Scripts>
                    </Frame>
                </Frames>
            </Frame>
            
            <Frame name="$parentSpellDropDownMenu" parentKey="SpellDropDownMenu" inherits="UIDropDownMenuTemplate"/>
        </Frames>
        
        <Scripts>
            <!--  NOTE: The code inside <OnLoad> is Lua that runs for this UI callback. -->
            <OnLoad>
                MixinAndLoadScripts(self, "CharacterAdvancementMixin")
            </OnLoad>
            <OnEvent function="OnEventToMethod"/>
        </Scripts>
    </Frame>
</Ui>